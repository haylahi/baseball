<?xml version="1.0" encoding="utf-8"?>
<openerp>
  <data>

  <template id="assets_frontend_layout" inherit_id="website.assets_frontend" name="head team">
    <xpath expr="." position="inside">
        <script type="text/javascript" src="/baseball/static/src/js/jquery.backstretch.min.js"></script>
        <script type="text/javascript" src="/baseball/static/src/js/sticky_header.js"></script>
        <script type="text/javascript" src="/baseball/static/src/js/bootstrap_multiselect.js"></script>
        <script type="text/javascript" src="/baseball/static/src/js/multiselect.js"></script>
        <script type="text/javascript" src="/baseball/static/src/js/sponsor.js"></script>
        <link rel="stylesheet" href="/baseball/static/src/css/bootstrap_multiselect.css" type="text/css"/>
        <link rel="stylesheet" href="/baseball/static/src/css/custom_bootstrap.css" type="text/css"/>
        <link href="/baseball/static/src/css/banner.css" rel="stylesheet" type="text/css" />
    </xpath>
  </template>

<!--     <template id="theme" name="theme" inherit_id="website.theme">
      <xpath expr="//link[last()]" position="after">
      </xpath>
    </template> -->

  <template id="footer" inherit_id="website.footer_default" name="footer">
    <xpath expr="//div[@class='row']" position="attributes">
        <attribute name="class">row panel panel-default</attribute>        
    </xpath>


    <xpath expr="//div[@class='container hidden-print']" position="after">
      <div style="left: 0px; top: 0px; overflow: hidden; margin: 0px; padding: 0px; height: 100%; width: 100%; z-index: -999999; position: fixed; background-image: url('/baseball/static/img/background/background5.jpg'); background-size:cover;"></div>    
    </xpath>
  </template>





    <template id="layout" inherit_id="website.layout">
    <xpath expr="//header" position="replace">
        <div class="row hidden-xs hidden-sm">
          <div class="col-lg-2"/>
          <div class="col-lg-8">
              <div class="header_banner">
                <center>
                  <img src='/baseball/static/src/img/banner3_lanceuse.png' id='header-lanceuse'/>
                  <img src='/baseball/static/src/img/banner3_frappeur.png' id='header-frappeur'/>
                  <img src='/baseball/static/src/img/banner3_catcher.png' id='header-catcher'/>
                  <img src='/baseball/static/src/img/banner3_fond.png' id='fond'/>
                  <img src='/baseball/static/src/img/banner3_trace.png' id='header-trace'/>
                  <img src='/baseball/static/src/img/banner3_balle.png' id='balle'/>
                </center>
              </div>
          </div>
          <div class="col-lg-2">
            <t t-call="baseball.sponsors_carousel"/>
          </div>
        </div>
      <header>
        
        <t t-set="parent_menu" t-value="request.env['website.menu'].search([('url','=',request.httprequest.path)])"/>
        <t t-if="not parent_menu and request.env.ref('baseball.teams_menu').url in request.httprequest.path">
          <t t-set="parent_menu" t-value="request.env.ref('baseball.teams_menu')"/>
        </t>
        <t t-if="parent_menu in website.menu_id.child_id.mapped('child_id')" >
          <t t-set="parent_menu" t-value="parent_menu.parent_id"/>
        </t>
        <t t-set="double_menu_bar" t-value="parent_menu.child_id or (parent_menu.id == request.env.ref('baseball.teams_menu').id)"/>
        <div class="navbar navbar-default navbar-static-top hidden-xs hidden-sm" t-att-id="'header_top_bar' if double_menu_bar else 'header_top_bar_single'" style="background-image: url('/baseball/static/src/css/img/stiches3.png');">
          <div class="container">
            <div class="col-md-2">
              <div class="navbar-header">
                  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-top-collapse">
                      <span class="sr-only">Toggle navigation</span>
                      <span class="icon-bar"></span>
                      <span class="icon-bar"></span>
                      <span class="icon-bar"></span>
                  </button>
                <img src="/baseball/static/src/img/logo2.png" id="logo_header" t-att-alt="'Logo of %s' % res_company.name" t-att-title="res_company.name"/>
              </div>
            </div>
            <div class="col-md-10">
              <div class="collapse navbar-collapse navbar-top-collapse col-md-12" style="width:100%;">
                  <ul class="nav navbar-nav navbar-right" id="top_menu">
                      <t t-foreach="website.menu_id.child_id" t-as="submenu">
                          <t t-call="website.submenu"/>
                      </t>
                      <li class="divider" t-ignore="true"/>
                      <li class="dropdown" t-ignore="true" t-if="website.user_id != user_id">
                          <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                              <b>
                                  <span t-esc="user_id.sudo().current_partner_id.name"/>
                                  <span class="caret"></span>
                              </b>
                          </a>
                          <ul class="dropdown-menu js_usermenu" role="menu">
                              <li><a href="/profile" role="menuitem"><i class="fa fa-user"/> Mon Profil</a></li>
                              <li class="divider"/>
                              <li id="o_logout"><a t-attf-href="/web/session/logout?redirect=/" role="menuitem">Log out</a></li>
                          </ul>
                      </li>
                      <li t-if="website.user_id == user_id">
                        <a href="/web/login?redirect=/profile">Log in</a>
                      </li>
                  </ul>

              </div>
              <div class="collapse navbar-collapse navbar-top-collapse col-md-12" style="width:100%;">

                  <!-- <t t-if="parent_menu.id == request.env.ref('baseball.teams_menu').id"> -->
                    <t t-set="current_menu" t-value="request.env['website.menu'].sudo().search([('url','=',request.httprequest.path)])"/>
                    <ul class="nav navbar-nav navbar-right" id="secondary_menu">
                      <t t-call="website.childmenu"/>
                    </ul>
                  <!-- </t> -->
              </div>
            </div>
          </div>
        </div>
        <div t-att-id="'header_top_bar_alias' if double_menu_bar else 'header_top_bar_alias_single'" class="hidden-xs hidden-sm"/>

        <div id="header_top_bar_small" class="navbar navbar-default navbar-static-top visible-xs visible-sm" style="background-image: url('/baseball/static/src/css/img/stiches3.png');">
            <div class="container">
                  <img src="/baseball/static/src/img/logo2.png" id="logo_header_small" t-att-alt="'Logo of %s' % res_company.name" t-att-title="res_company.name"/>

                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-top-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/" t-if="website" t-field="website.name">My Website</a>
                </div>
                <div class="collapse navbar-collapse navbar-top-collapse">
                    <ul class="nav navbar-nav navbar-right" id="top_menu">
                        <t t-foreach="website.menu_id.child_id" t-as="submenu">
                            <t t-call="website.submenu_mini"/>
                        </t>
                        <li class="divider" t-ignore="true" t-if="website.user_id != user_id"/>
                        <li class="dropdown" t-ignore="true" t-if="website.user_id != user_id">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <b>
                                    <span t-esc="(len(user_id.name)&gt;25) and (user_id.name[:23]+'...') or user_id.name"/>
                                    <span class="caret"></span>
                                </b>
                            </a>
                            <ul class="dropdown-menu js_usermenu" role="menu">
                                <li id="o_logout"><a t-attf-href="/web/session/logout?redirect=/" role="menuitem">Logout</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div id="header_top_bar_small_alias" class="visible-xs visible-sm"/>

      </header>
    </xpath>
    <xpath expr="//head//title" position="after">
        <link rel="shortcut icon" href="/baseball/static/src/img/favicon.ico" type="image/x-icon"/>
    </xpath>
    </template>


        <record id="layout" model="ir.ui.view">
            <field name="priority">17</field>
          
        </record>

<template id="website.submenu_mini" name="Submenu">
    <li t-if="not submenu.child_id" t-att-class="
        'active' if submenu.url and submenu.url != '/' and request.httprequest.path == submenu.url.replace('/page/website.', '/page/') else None
        ">

        <t t-if="submenu.id == request.env.ref('baseball.teams_menu').id">
          <a class="dropdown-toggle disabled" data-toggle="dropdown" t-att-href="(website.menu_id.child_id[0] == submenu) and '/' or submenu.url" t-ignore="true" t-att-target="'_blank' if submenu.new_window else None">
                        <span t-field="submenu.name"/>
                    </a><a class="dropdown-toggle subdropdown" data-toggle="dropdown"><span class="caret" t-ignore="true"></span></a>
          <ul class="dropdown-menu" role="menu">
            <t t-foreach="request.env['baseball.teams'].sudo().search([('is_opponent','=',False)])" t-as="team">
                <li t-att-class="
                'active' if request.httprequest.path == (submenu.url + '/' + str(team.id)) else None
                ">
                  <a t-att-href="submenu.url + '/' + str(team.id) ">
                      <span t-field="team.name"/>
                  </a>
                </li>  
            </t>
          </ul>
        </t>
        <t t-if="submenu.id != request.env.ref('baseball.teams_menu').id">
          <a t-att-href="(website.menu_id.child_id[0] == submenu) and '/' or submenu.url" t-ignore="true" t-att-target="'_blank' if submenu.new_window else None">
              <span t-field="submenu.name"/>
          </a>
        </t>
    </li>
    <li t-if="submenu.child_id" t-attf-class="dropdown #{
        (submenu.url and submenu.url != '/' and any([request.httprequest.path == child.url.replace('/page/website.', '/page/') for child in submenu.child_id if child.url]) or
         (submenu.url and request.httprequest.path == submenu.url.replace('/page/website.', '/page/'))) and 'active'
        }">
        <a class="dropdown-toggle disabled" data-toggle="dropdown" t-att-href="(website.menu_id.child_id[0] == submenu) and '/' or submenu.url">
            <span t-field="submenu.name"/>
        </a><a class="dropdown-toggle subdropdown" data-toggle="dropdown"><span class="caret" t-ignore="true"></span></a>
        <ul class="dropdown-menu" role="menu">
            <t t-foreach="submenu.child_id" t-as="submenu">
                <t t-call="website.submenu_mini"/>
            </t>
        </ul>
    </li>

</template>

<template id="website.submenu" name="Submenu">
    <li t-att-class="
        'active' if (submenu.url and submenu.url != '/' and request.httprequest.path == submenu.url.replace('/page/website.', '/page/')) or (parent_menu == submenu) else None
        ">
        <a t-att-href="(website.menu_id.child_id[0] == submenu) and '/' or submenu.url" t-ignore="true" t-att-target="'_blank' if submenu.new_window else None">
            <span t-field="submenu.name"/>
        </a>
    </li>
</template>


<template id="website.childmenu" name="Childmenu">
  <t t-if="parent_menu.id != request.env.ref('baseball.teams_menu').id">
    <t t-foreach="parent_menu.child_id" t-as="submenu">  
      <li t-att-class="
          'active' if submenu.url and submenu.url != '/' and request.httprequest.path == submenu.url.replace('/page/website.', '/page/') else None
          ">
          <a t-att-href="(website.menu_id.child_id[0] == submenu) and '/' or submenu.url" t-ignore="true" t-att-target="'_blank' if submenu.new_window else None">
              <span t-field="submenu.name"/>
          </a>
      </li>
    </t>
  </t>
  <t t-if="parent_menu.id == request.env.ref('baseball.teams_menu').id">
    <t t-foreach="request.env['baseball.teams'].sudo().search([('is_opponent','=',False)])" t-as="team">
        <li t-att-class="
        'active' if request.httprequest.path == (parent_menu.url + '/' + str(team.id)) else None
        ">
          <a t-att-href="parent_menu.url + '/' + str(team.id) ">
              <span t-field="team.name"/>
          </a>
        </li>  
    </t>
  </t>
</template>

<template id="sponsors_carousel" name="Sponsor Carousel">

  <div class="container" style="width: 100%;">
    <div id="sponsor_carousel" class="carousel slide" data-ride="carousel" data-interval="5000">
      <!-- Wrapper for slides -->
      <div class="carousel-inner">
        <t t-foreach="request.env['baseball.sponsor'].sudo().get_active_sponsors()" t-as="sponsor">
          <t t-if="sponsor.image">
            <div t-att-class="'item active' if sponsor == request.env['baseball.sponsor'].sudo().get_active_sponsors()[0] else 'item'">
              <a t-attf-href="/sponsors/#{slug(sponsor)}">
                <img class="img-carousel-sponsor" t-att-src="'data:image/png;base64,'+sponsor.image" width="150px"/>
              </a>
            </div>
          </t>
        </t>
      </div>
    </div>
  </div>
</template>


  </data>
</openerp>